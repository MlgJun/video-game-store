<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flex-Shop - Главная страница</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/views_css/index.css">
    <link rel="stylesheet" href="css/components_css/genres.css">
    <link rel="stylesheet" href="css/components_css/header.css">
    <link rel="stylesheet" href="css/components_css/footer.css">
    <link rel="stylesheet" href="css/components_css/product_cards.css">
    <link rel="stylesheet" href="css/components_css/product_views.css">
    <link rel="stylesheet" href="css/components_css/menu.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat+Alternates:wght@400;600&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>

<body>

    <header class="site-header" role="banner" aria-label="Главная шапка">
        <div class="header-inner">
            <div class="header-left">
                <a href="index.html" class="logo-wrap">
                    <div class="logo-text">Flex-Shop</div>
                </a>
            </div>

            <div class="header-center">
                <button class="genres-btn" aria-label="Жанры" id="openGenresBtn">
                    <svg class="icon genres-icon" viewBox="0 0 35 35" xmlns="http://www.w3.org/2000/svg"
                        aria-hidden="true">
                        <path
                            d="M1.69355 0C0.75504 0 0 0.90024 0 2.01923V6.05769C0 7.17668 0.75504 8.07692 1.69355 8.07692H5.08065C6.01915 8.07692 6.77419 7.17668 6.77419 6.05769V2.01923C6.77419 0.90024 6.01915 0 5.08065 0H1.69355ZM12.4194 1.34615C11.1704 1.34615 10.1613 2.54928 10.1613 4.03846C10.1613 5.52764 11.1704 6.73077 12.4194 6.73077H32.7419C33.9909 6.73077 35 5.52764 35 4.03846C35 2.54928 33.9909 1.34615 32.7419 1.34615H12.4194ZM12.4194 14.8077C11.1704 14.8077 10.1613 16.0108 10.1613 17.5C10.1613 18.9892 11.1704 20.1923 12.4194 20.1923H32.7419C33.9909 20.1923 35 18.9892 35 17.5C35 16.0108 33.9909 14.8077 32.7419 14.8077H12.4194ZM12.4194 28.2692C11.1704 28.2692 10.1613 29.4724 10.1613 30.9615C10.1613 32.4507 11.1704 33.6539 12.4194 33.6539H32.7419C33.9909 33.6539 35 32.4507 35 30.9615C35 29.4724 33.9909 28.2692 32.7419 28.2692H12.4194ZM0 15.4808V19.5192C0 20.6382 0.75504 21.5385 1.69355 21.5385H5.08065C6.01915 21.5385 6.77419 20.6382 6.77419 19.5192V15.4808C6.77419 14.3618 6.01915 13.4615 5.08065 13.4615H1.69355C0.75504 13.4615 0 14.3618 0 15.4808ZM1.69355 26.9231C0.75504 26.9231 0 27.8233 0 28.9423V32.9808C0 34.0998 0.75504 35 1.69355 35H5.08065C6.01915 35 6.77419 34.0998 6.77419 32.9808V28.9423C6.77419 27.8233 6.01915 26.9231 5.08065 26.9231H1.69355Z"
                            fill="currentColor" />
                    </svg>
                </button>

                <div class="search-wrap">
                    <div class="search-inline">
                        <svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                            <path
                                d="M15.7832 14.3911L20 18.6069L18.6069 20L14.3911 15.7832C12.8224 17.0407 10.8713 17.7246 8.86088 17.7246C3.96968 17.7246 0 13.7549 0 8.86232C0 3.96968 3.96968 0 8.86088 0C13.7521 0 17.7218 3.96968 17.7218 8.86232C17.7218 10.8727 17.0378 12.8238 15.7803 14.3925L15.7832 14.3911ZM8.86088 15.8424C12.1917 15.8424 14.8871 13.147 14.8871 9.81623C14.8871 6.48547 12.1917 3.7901 8.86088 3.7901C5.53011 3.7901 2.83475 6.48547 2.83475 9.81623C2.83475 13.147 5.53011 15.8424 8.86088 15.8424Z"
                                fill="currentColor" />
                        </svg>
                    </div>
                    <input class="search-input" placeholder="Поиск по названию игры..."
                        aria-label="Поиск по названию игры" id="searchInput" />
                    <button class="search-clear-btn" id="clearSearchBtn">×</button>
                </div>
            </div>

            <div class="header-right">
                <a href="cart.html" class="action-btn cart-btn" id="cartLink">
                    <svg class="icon cart-icon" viewBox="59 55 28 29" xmlns="http://www.w3.org/2000/svg"
                        aria-hidden="true">
                        <path
                            d="M87 67.5001V68.5001C87 69.3285 86.4777 70.0001 85.8333 70.0001H85.4444L84.1751 81.4243C84.0109 82.9022 83.0264 84 81.8652 84H64.1348C62.9736 84 61.9891 82.9022 61.8249 81.4243L60.5556 70.0001H60.1667C59.5223 70.0001 59 69.3285 59 68.5001V67.5001C59 66.6717 59.5223 66.0001 60.1667 66.0001H63.4402L68.6309 56.8239C69.1362 55.9306 70.109 55.7331 70.8038 56.3827C71.4986 57.0324 71.6523 58.2832 71.1469 59.1765L67.2871 66.0001H78.7129L74.8531 59.1765C74.3477 58.2832 74.5014 57.0324 75.1962 56.3827C75.8909 55.733 76.8639 55.9305 77.3692 56.8238L82.5598 66.0001H85.8333C86.4777 66.0001 87 66.6717 87 67.5001ZM74.1667 78.5V71.5001C74.1667 70.6716 73.6443 70.0001 73 70.0001C72.3557 70.0001 71.8333 70.6716 71.8333 71.5001V78.5C71.8333 79.3285 72.3557 80 73 80C73.6443 80 74.1667 79.3285 74.1667 78.5ZM79.6111 78.5V71.5001C79.6111 70.6716 79.0888 70.0001 78.4444 70.0001C77.8001 70.0001 77.2778 70.6716 77.2778 71.5001V78.5C77.2778 79.3285 77.8001 80 78.4444 80C79.0888 80 79.6111 79.3285 79.6111 78.5ZM68.7222 78.5V71.5001C68.7222 70.6716 68.1999 70.0001 67.5556 70.0001C66.9112 70.0001 66.3889 70.6716 66.3889 71.5001V78.5C66.3889 79.3285 66.9112 80 67.5556 80C68.1999 80 68.7222 79.3285 68.7222 78.5Z"
                            fill="currentColor" />
                    </svg>
                    <span class="action-label">Корзина</span>
                    <span id="cartItemCount" class="cart-badge" style="display: none;"></span>
                </a>

                <button class="action-btn user-btn" id="userMenuToggle">
                    <svg class="icon user-icon" viewBox="107 56 26 28" xmlns="http://www.w3.org/2000/svg"
                        aria-hidden="true">
                        <path
                            d="M120 70C121.97 70 123.86 69.2625 125.253 67.9497C126.646 66.637 127.429 64.8565 127.429 63C127.429 61.1435 126.646 59.363 125.253 58.0503C123.86 56.7375 121.97 56 120 56C118.03 56 116.14 56.7375 114.747 58.0503C113.354 59.363 112.571 61.1435 112.571 63C112.571 64.8565 113.354 66.637 114.747 67.9497C116.14 69.2625 118.03 70 120 70ZM117.348 72.625C111.631 72.625 107 76.9891 107 82.3758C107 83.2727 107.772 84 108.724 84H131.276C132.228 84 133 83.2727 133 82.3758C133 76.9891 128.369 72.625 122.652 72.625H117.348Z"
                            fill="currentColor" />
                    </svg>
                    <span class="action-label" id="userMenuLabel">Войти</span>
                    </a>
            </div>
        </div>
    </header>

    <!-- Меню -->
    <div class="menu-fixed-container" id="menuContainer">
        <!-- Меню гостя -->
        <div id="guestMenu" class="menu-overlay guest-menu">
            <div class="menu-container" role="dialog" aria-label="Меню неавторизованного пользователя">
                <button class="menu-button" id="mainMenuBtn">
                    <img src="assets/icons/buy.svg" alt="" class="menu-icon" />
                    <span>Главная</span>
                </button>

                <button class="menu-button" id="loginMenuBtn">
                    <img src="assets/icons/user.svg" alt="" class="menu-icon" />
                    <span>Вход в аккаунт</span>
                </button>

                <button class="menu-button" id="registerMenuBtn">
                    <img src="assets/icons/registration.svg" alt="" class="menu-icon" />
                    <span>Регистрация</span>
                </button>
            </div>
        </div>

        <!-- Меню покупателя -->
        <div id="userMenu" class="menu-overlay user-menu">
            <div class="menu-container" role="dialog" aria-label="Меню покупателя">
                <div class="user-info">
                    <div class="user-avatar" id="userAvatar">П</div>
                    <div class="user-details">
                        <div class="user-name" id="userName">Пользователь</div>
                        <div class="user-email" id="userEmail"></div>
                        <div class="user-role">Покупатель</div>
                    </div>
                </div>

                <nav class="user-nav">
                    <button class="menu-button" id="mainUserMenuBtn">
                        <img src="assets/icons/buy.svg" alt="" class="menu-icon" />
                        <span>Главная</span>
                    </button>

                    <button class="menu-button" id="ordersMenuBtn">
                        <img src="assets/icons/history.svg" alt="" class="menu-icon" />
                        <span>История заказов</span>
                    </button>

                    <button class="menu-button" id="cartMenuBtn">
                        <img src="assets/icons/shopping-cart.svg" alt="" class="menu-icon" />
                        <span>Корзина</span>
                        <span id="cartItemCountMenu" class="menu-badge" style="display: none;">0</span>
                    </button>

                    <button class="menu-button" id="userLogoutBtn">
                        <img src="assets/icons/logout.svg" alt="" class="menu-icon" />
                        <span>Выйти</span>
                    </button>
                </nav>
            </div>
        </div>

        <!-- Меню продавца -->
        <div id="sellerMenu" class="menu-overlay seller-menu">
            <div class="menu-container" role="dialog" aria-label="Меню продавца">
                <div class="user-info">
                    <div class="user-avatar" id="sellerAvatar">П</div>
                    <div class="user-details">
                        <div class="user-name" id="sellerName">Продавец</div>
                        <div class="user-email" id="sellerEmail"></div>
                        <div class="user-role">Продавец</div>
                        <div class="seller-stats">
                            <span class="stat-item">Игр: <span id="sellerGamesCount">0</span></span>
                        </div>
                    </div>
                </div>

                <nav class="seller-nav">
                    <button class="menu-button" id="mainSellerMenuBtn">
                        <img src="assets/icons/buy.svg" alt="" class="menu-icon" />
                        <span>Главная</span>
                    </button>

                    <button class="menu-button" id="sellerGamesMenuBtn">
                        <img src="assets/icons/product.svg" alt="" class="menu-icon" />
                        <span>Мои товары</span>
                    </button>

                    <button class="menu-button" id="sellerLogoutBtn">
                        <img src="assets/icons/logout.svg" alt="" class="menu-icon" />
                        <span>Выйти</span>
                    </button>
                </nav>
            </div>
        </div>
    </div>

    <main class="home-canvas" role="main" aria-label="Главная страница">
        <!-- Меню фильтров по жанрам -->
        <div class="genres-overlay" id="genresOverlay" style="display: none;">
            <div class="genres-menu" role="dialog" aria-label="Выбор жанров игр">
                <div class="genres-header">
                    <h2 class="genres-title">Выберите жанры</h2>
                    <div class="genres-actions">
                        <button type="button" class="clear-btn" id="clearGenresBtn" disabled>
                            Сбросить
                        </button>
                        <button type="button" class="apply-btn" id="applyGenresBtn">
                            Применить (0)
                        </button>
                        <button type="button" class="close-btn" id="closeGenresBtn">
                            ×
                        </button>
                    </div>
                </div>

                <div class="genres-inner">
                    <div class="genres-list" id="genresList">
                        <!-- Все жанры будут добавлены через JavaScript -->
                    </div>
                </div>
            </div>
        </div>

        <section class="three-blocks">
            <aside class="left-block">
                <h2 class="left-title">Новинки!</h2>
                <ol class="new-list">
                    <li>Solo Leveling</li>
                    <li>Night Swarm</li>
                    <li>Escape from Tarkov</li>
                    <li>Arc Raiders</li>
                    <li>Dispatch</li>
                    <li>Hades II</li>
                    <li>Megabonk</li>
                    <li>No, I'm not a Human</li>
                    <li>CloverPit</li>
                    <li>Hollow Knight: Silksong</li>
                </ol>
            </aside>

            <div class="center-block">
                <img src="assets/images/baner.png" alt="Рекламный баннер" class="banner-image">
            </div>

            <div class="right-block">
                <div class="promo-text">Новинка!</div>
                <img src="assets/images/new.png" alt="Новая игра" class="new-game-image">
            </div>
        </section>

        <!-- Фильтр по цене -->
        <div class="price-filter" role="region" aria-label="Фильтр по цене">
            <div class="pf-fields">
                <label class="pf-field">
                    <span class="pf-label">Цена от:</span>
                    <input class="pf-input" type="number" inputmode="numeric" pattern="\\d*" aria-label="Цена от"
                        min="0" step="0.01" id="min-price" />
                </label>
                <label class="pf-field">
                    <span class="pf-label">До:</span>
                    <input class="pf-input" type="number" inputmode="numeric" pattern="\\d*" aria-label="Цена до"
                        min="0" step="0.01" id="max-price" />
                </label>

                <!-- Кнопка применения фильтра -->
                <button class="pf-btn" id="apply-filter" aria-label="Применить фильтр">
                    <span class="btn-text">Готово</span>
                    <span class="success-icon">✓</span>
                    <span class="loader"></span>
                </button>
            </div>

            <!-- Кнопка сброса фильтра -->
            <button class="reset-filter-btn" id="reset-filter" aria-label="Сбросить фильтр" title="Сбросить фильтр">
                ×
            </button>
        </div>

        <!-- Блок с выбранными жанрами -->
        <div class="active-genres-filters hidden" id="activeFilters">
            <div class="active-filters-inner">
                <span class="filters-label">Выбранные жанры:</span>
                <div class="filter-tags" id="filterTags">
                    <!-- Выбранные жанры будут отображаться здесь -->
                </div>
                <button type="button" class="clear-filters-btn" id="clearAllFiltersBtn">
                    Очистить все
                </button>
            </div>
        </div>

        <!-- Информация о фильтре -->
        <div class="filter-info">
            <span class="filter-text">Фильтр: </span>
            <span class="filter-range" id="filterRangeText">
                от 0 до ∞ ₽
            </span>
            <span class="filter-count" id="filterCountText">
                (найдено 0 товаров)
            </span>
        </div>

        <!-- Сетка товаров -->
        <div class="products-grid" id="products-grid">
            <!-- Карточки товаров будут добавляться через JavaScript -->

            <div class="no-results" id="no-results" style="display: none;">
                Товары не найдены
            </div>

            <div class="loading-spinner" id="loading-spinner" style="display: none;">
                <div class="spinner"></div>
                <p>Загрузка товаров...</p>
            </div>
        </div>

        <!-- Пагинация -->
        <div class="pagination" id="paginationContainer">
            <button class="page-btn prev-btn" id="prev-page" aria-label="Предыдущая страница" disabled>
                ←
            </button>

            <div class="page-numbers" id="page-numbers">
                <!-- Страницы будут генерироваться через JavaScript -->
            </div>

            <button class="page-btn next-btn" id="next-page" aria-label="Следующая страница" disabled>
                →
            </button>

            <div class="page-info">
                Страница <span id="current-page">1</span> из <span id="total-pages">1</span>
            </div>
        </div>

        <!-- Модальное окно просмотра товара -->
        <div class="modal-overlay view" id="productViewOverlay" style="display: none;">
            <div class="product-view-modal">
                <button class="close-view-btn" id="closeProductViewBtn1" aria-label="Закрыть просмотр">×</button>

                <div class="product-view-details">
                    <div class="view-left-section">
                        <div class="view-main-image-wrapper">
                            <div class="photo-placeholder large">
                                <div class="no-image-text">Нет изображения</div>
                            </div>
                            <img class="view-main-image" id="viewMainImage" style="display: none;"
                                alt="Изображение игры">
                        </div>

                        <div class="view-description-box">
                            <label class="field-label">Описание:</label>
                            <div class="view-description-text" id="viewDescription">
                                Здесь будет описание товара...
                            </div>
                        </div>

                        <div class="view-price-section">
                            <label class="field-label">Цена (₽):</label>
                            <div class="view-price-value" id="viewPrice">0</div>
                        </div>
                    </div>

                    <!-- Правая секция -->
                    <div class="view-right-section">
                        <div class="view-title" id="viewTitle">Название товара</div>

                        <div class="specs">
                            <div class="spec-row">
                                <div class="spec-label">Разработчик:</div>
                                <div class="spec-value" id="viewDeveloper">Не указано</div>
                            </div>

                            <div class="spec-row">
                                <div class="spec-label">Издатель:</div>
                                <div class="spec-value" id="viewPublisher">Не указано</div>
                            </div>

                            <div class="spec-row">
                                <div class="spec-label">Жанры:</div>
                                <div class="spec-value">
                                    <div class="view-genres-container" id="viewGenresContainer"></div>
                                </div>
                            </div>

                            <div class="spec-row">
                                <div class="spec-label">Доступно ключей:</div>
                                <div class="spec-value" id="viewCount">0</div>
                            </div>

                        </div>

                        <div class="view-buttons-section">
                            <button class="view-btn view-btn-cart" id="addToCartBtn">
                                В корзину
                            </button>

                            <button class="view-btn view-btn-back" id="closeProductViewBtn2">
                                Вернуться
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </main>

    <footer class="site-footer" role="contentinfo" aria-label="Футер">
        <div class="footer-inner">
            <div class="footer-left">
                <a href="index.html" class="footer-logo-link">
                    <div class="footer-logo-wrap">
                        <div class="footer-logo-text">Flex-Shop</div>
                    </div>
                </a>
                <div class="footer-sub">© Flex-Shop 2025. Все права защищены.</div>
            </div>

            <div class="footer-right">
                <div class="footer-title">Мы в соцсетях</div>
                <div class="footer-icons">
                    <a class="social-link" href="#" aria-label="Telegram">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="58 112 29 26" class="social-svg"
                            fill="currentColor">
                            <path
                                d="M86.9202 115.276L82.6948 136.491C82.3761 137.988 81.5447 138.361 80.3634 137.655L73.9253 132.605L70.8188 135.785C70.475 136.152 70.1875 136.458 69.5249 136.458L69.9875 129.477L81.9198 117.998C82.4386 117.505 81.8073 117.232 81.1134 117.725L66.3621 127.614L60.0116 125.497C58.6302 125.038 58.6052 124.027 60.2991 123.321L85.1388 113.133C86.2889 112.674 87.2952 113.406 86.9202 115.276Z" />
                        </svg>
                        <span class="social-label">Telegram</span>
                    </a>

                    <a class="social-link" href="#" aria-label="Вконтакте">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="107 116 28 18" class="social-svg"
                            fill="currentColor">
                            <path
                                d="M134.362 117.221C134.554 116.517 134.362 116 133.437 116H130.375C129.595 116 129.237 116.444 129.044 116.939C129.044 116.939 127.485 121.051 125.281 123.717C124.569 124.488 124.242 124.736 123.852 124.736C123.659 124.736 123.363 124.488 123.363 123.785V117.221C123.363 116.377 123.145 116 122.5 116H117.687C117.198 116 116.907 116.394 116.907 116.759C116.907 117.558 118.009 117.744 118.124 119.994V124.876C118.124 125.945 117.947 126.142 117.557 126.142C116.517 126.142 113.991 122.013 112.494 117.288C112.193 116.371 111.896 116 111.112 116H108.05C107.177 116 107 116.444 107 116.939C107 117.817 108.04 122.176 111.839 127.936C114.371 131.868 117.936 134 121.18 134C123.129 134 123.368 133.527 123.368 132.712C123.368 128.954 123.192 128.6 124.169 128.6C124.621 128.6 125.401 128.848 127.22 130.743C129.299 132.993 129.642 134 130.806 134H133.868C134.741 134 135.183 133.528 134.928 132.594C134.346 130.631 130.411 126.592 130.235 126.322C129.782 125.692 129.912 125.411 130.235 124.848C130.24 124.843 133.977 119.15 134.362 117.221Z" />
                        </svg>
                        <span class="social-label">ВКонтакте</span>
                    </a>
                </div>
            </div>
        </div>
    </footer>

    <script src="js/router.js"></script>
    <script src="js/api.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/genres.js"></script>
    <script src="js/menu.js"></script>
    <script src="js/index.js"></script>

</body>

</html>